<%= javascript 'application' %>
<%= render_js_rest_data 'posts', @posts, :only => [:title, :published, :body] %>

<div id="index">
  <h1>Listing posts</h1>

  <table id="posts">
    <tr>
      <th style="width: 50%; text-align: left;">Title</th>
      <th>Published</th>
      <th colspan="3">&nbsp;</th>
    </tr>

  <% @posts.each do |post| %>
    <tr id="post_<%= post.id %>" class="post">
      <td class="title"><%=h post.title %></td>
      <td class="published"><%=h post.published %></td>
      <td><%= link_to 'Show', post %></td>
      <td><%= link_to 'Edit', edit_post_path(post) %></td>
      <td><%= link_to 'Destroy', post, :class => 'destroy_post' %></td>
    </tr>
  <% end %>
  </table>

  <br />

  <div style="border: 2px solid blue; padding: 0 10px; margin-top: 20px;">
    <%= link_to 'New post', new_post_path %>
    <div id="new_post_form_container"></div>
  </div>
  
  <div style="border: 2px solid cyan; padding: 0 10px; margin-top: 20px;">
    <p>This page is showing <strong id="post_count_using_ajax"><%= render :partial => 'post_count', :locals => { :count => @posts.length } %></strong> (updated with AJAX).</p>
  </div>
</div>
